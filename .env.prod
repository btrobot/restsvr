# FastAPI 微服务项目 - 生产环境配置模板
# ===================================
# 警告：这是生产环境配置文件模板！
# 使用前务必将所有密码修改为强密码
# 不要将此文件提交到版本控制

# ====================
# 项目基础配置
# ====================
PROJECT_NAME=fastapi-microservices
VERSION=1.0.0
ENVIRONMENT=production

# ====================
# 数据库配置 - PostgreSQL (生产环境)
# ====================
# 修改以下密码为生产环境的强密码！
POSTGRES_DB=microservices
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD!
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# 生产环境数据库连接池配置
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=10
POSTGRES_POOL_TIMEOUT=30
POSTGRES_POOL_RECYCLE=300

# ====================
# 数据库配置 - MySQL (可选)
# ====================
MYSQL_DATABASE=microservices
MYSQL_USER=app_user
MYSQL_PASSWORD=CHANGE_THIS_MYSQL_PASSWORD!
MYSQL_ROOT_PASSWORD=CHANGE_THIS_ROOT_PASSWORD!
MYSQL_HOST=mysql
MYSQL_PORT=3306

# ====================
# Redis 配置
# ====================
REDIS_HOST=redis
REDIS_PORT=6379
# 生产环境强烈建议设置密码
REDIS_PASSWORD=
REDIS_DB=0

# Redis 连接池配置
REDIS_POOL_SIZE=50
REDIS_POOL_MAX_CONNECTIONS=100
REDIS_SOCKET_TIMEOUT=5

# ====================
# 服务配置
# ====================
NGINX_HOST=0.0.0.0
NGINX_PORT=80

USER_SERVICE_HOST=user-service
USER_SERVICE_PORT=8000
USER_SERVICE_WORKERS=4

ORDER_SERVICE_HOST=order-service
ORDER_SERVICE_PORT=8000
ORDER_SERVICE_WORKERS=4

PRODUCT_SERVICE_HOST=product-service
PRODUCT_SERVICE_PORT=8000
PRODUCT_SERVICE_WORKERS=4

# ====================
# 日志配置 - 生产环境使用 INFO
# ====================
LOG_LEVEL=INFO
LOG_FORMAT=json

# ====================
# JWT 配置
# ====================
# 修改以下内容并使用 openssl rand -hex 32 生成强密钥
JWT_SECRET_KEY=CHANGE_THIS_USING_OPENSSL_RAND_HEX_32!
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ====================
# 安全与限流
# ====================
RATE_LIMIT_PER_MINUTE=100

# CORS 配置 - 生产环境请明确指定允许的域名
# 例如: https://your-domain.com,https://api.your-domain.com
ALLOWED_ORIGINS=
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=Authorization,Content-Type

# ====================
# 监控与告警
# ====================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
ENABLE_METRICS=true
METRICS_PORT=9090

# ====================
# 第三方服务
# ====================
# Sentry 错误追踪 (强烈推荐配置)
SENTRY_DSN=

# Email 服务配置
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=

# ====================
# 服务发现
# ====================
SERVICE_DISCOVERY_ENABLED=false
CONSUL_HOST=consul
CONSUL_PORT=8500

# ====================
# 消息队列
# ====================
CELERY_BROKER_URL=redis://redis:6379/3
CELERY_RESULT_BACKEND=redis://redis:6379/4

# ====================
# 文件上传
# ====================
MAX_UPLOAD_SIZE=10485760
UPLOAD_DIR=/app/uploads

# ====================
# API 文档
# ====================
# 生产环境建议关闭 API 文档，或将路径改为随机字符串
DOCS_URL=/docs
REDOC_URL=/redoc
OPENAPI_URL=/openapi.json
# 生产环境建议设为 false
ENABLE_DOCS=false
